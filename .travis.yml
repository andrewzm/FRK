# Sample .travis.yml for R projects

language: r
warnings_are_errors: false
sudo: required
cache: packages

env:
 global:
   - CRAN: http://cran.rstudio.com

#env:
#  global:
#    - NOT_CRAN=true
#before_install: echo "options(repos = c(CRAN='http://cran.rstudio.com'))" > ~/.Rprofile


notifications:
  email:
    on_success: change
    on_failure: change

install:
- Rscript -e 'install.packages("devtools", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("knitr", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("dplyr", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("sp", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("spacetime", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("digest", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("plyr", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("dplyr", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("ggplot2", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("splancs", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("mapproj", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("rgeos", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("gstat", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("testthat", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("spdep", repos = "http://cran.rstudio.com")'
- Rscript -e 'install.packages("verification", repos = "http://cran.rstudio.com")'
- Rscript -e 'devtools::install_github("andrewzm/inla")'
- Rscript -e 'devtools::install_github("jimhester/covr")'
- Rscript -e 'devtools::install_github("jimhester/lintr")'
# - Rscript -e "install.packages('INLA', repos='http://www.math.ntnu.no/inla/R/stable')"
# - Rscript -e "if (!require('covr')) install.packages('covr',repos='http://cran.us.r-project.org')"
# - Rscript -e "if (!require('knitr')) install.packages('knitr',repos='http://cran.us.r-project.org')"


r_binary_packages:
  - XML
  - knitr

#r_github_packages:
#  - jimhester/covr
#  - hadley/testthat
#  - jimhester/lintr
#  - andrewzm/inla

#after_success:
#  - Rscript -e 'library(covr);codecov()'
#  - Rscript -e 'library(covr);coveralls()'
#   run test coverage only for the travis build
#  - "[ $TARGET = travis ] && Rscript -e 'covr::coveralls()'"
after_success:
  - Rscript -e 'covr::codecov()'

